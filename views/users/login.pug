extends ../layout

block content
  h1 Login
  form(action="", method="POST" id="loginForm")
    label(for="username") Username:
    input(type="text", name="username", required)
    br
    label(for="password") Password:
    input(type="password", name="password", required)
    br
    button(type="submit") Login

  script.
    let loginForm = document.getElementById('loginForm')
    loginForm.addEventListener("submit", async(e) => {
      e.preventDefault();

      // handle submission
      const username = e.target.username.value
      const password = e.target.password.value

      data = {
        username: username
        password : password,
      }

      const apiUrl = `http://localhost:3001/login/${id}`;

      fetch (aipUrl,{
        method: "POST",
        body: JSON.stringify(data),
        headers: {
          "Content-Type": "application/json",
          "Accept": "text/html"
        }
      })
      .then((response) => {
          if (response.ok) {
          window.location.href = `http://localhost:3001/`;
          }
      })
      .catch((error) => console.log(error))
    });